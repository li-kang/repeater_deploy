(function(t){function e(e){for(var r,a,s=e[0],c=e[1],u=e[2],d=0,h=[];d<s.length;d++)a=s[d],Object.prototype.hasOwnProperty.call(i,a)&&i[a]&&h.push(i[a][0]),i[a]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(t[r]=c[r]);l&&l(e);while(h.length)h.shift()();return o.push.apply(o,u||[]),n()}function n(){for(var t,e=0;e<o.length;e++){for(var n=o[e],r=!0,s=1;s<n.length;s++){var c=n[s];0!==i[c]&&(r=!1)}r&&(o.splice(e--,1),t=a(a.s=n[0]))}return t}var r={},i={app:0},o=[];function a(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=t,a.c=r,a.d=function(t,e,n){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)a.d(n,r,function(e){return t[e]}.bind(null,r));return n},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=e,s=s.slice();for(var u=0;u<s.length;u++)e(s[u]);var l=c;o.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"0890":function(t,e,n){"use strict";var r=n("5d63"),i=n.n(r);i.a},"21d5":function(t,e,n){},2395:function(t,e,n){},"35bb":function(t,e,n){},"3f82":function(t,e,n){"use strict";var r=n("fdb1"),i=n.n(r);i.a},"4bba":function(t,e,n){"use strict";var r=n("c58c"),i=n.n(r);i.a},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("2b0e"),i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},o=[],a={created:function(){this.$store.commit("vocabulary/load")}},s=a,c=(n("7c55"),n("2877")),u=Object(c["a"])(s,i,o,!1,null,null,null),l=u.exports,d=n("9483");Object(d["a"])("".concat("/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(t){console.error("Error during service worker registration:",t)}});var h=n("8c4f"),f=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"book"},[t.book?n("div",[n("van-nav-bar",{attrs:{title:t.book.title,"left-text":"返回","right-text":t.showTranslation?"中":"En","left-arrow":"",fixed:""},on:{"click-right":function(e){t.showTranslation=!t.showTranslation}}}),n("img",{staticClass:"book-image",attrs:{src:t.book.dir+"/book.jpg"}}),n("van-cell-group",t._l(t.book.articles,(function(e){return n("van-cell",{key:e.order,attrs:{title:t.showTranslation?e.title:e.titleTranslation,label:e.order,"is-link":"",center:"",to:{name:"repeater",params:{book:t.book,article:e}}}})})),1)],1):n("van-skeleton",{attrs:{title:"",row:5}})],1)},p=[],v=(n("96cf"),n("1da1")),m=(n("c194"),n("7744")),b=(n("0653"),n("34e9")),k=(n("5246"),n("6b41")),y=(n("0209"),n("7d5e")),g=(n("99af"),n("5530")),w=n("d4ec"),x=n("bee2"),O=n("bc3a"),S=n.n(O),_=function(){function t(){Object(w["a"])(this,t)}return Object(x["a"])(t,[{key:"getBookId",value:function(t){var e=t.title,n=t.sn;return"".concat(e,"_").concat(n)}},{key:"getArticleId",value:function(t){var e=t.order,n=t.title;return"[".concat(e,"]").concat(n)}},{key:"getBook",value:function(){var t=Object(v["a"])(regeneratorRuntime.mark((function t(e){var n,r,i,o,a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.title,r=e.sn,i=this.getBookId({title:n,sn:r}),o="/books/".concat(i),t.next=5,S.a.get("".concat(o,"/book.json"));case 5:return a=t.sent,s=Object(g["a"])({},a.data,{dir:o}),t.abrupt("return",s);case 8:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"_getArticleBasePath",value:function(t,e){var n=this.getBookId(t),r=this.getArticleId(e);return"/books/".concat(n,"/").concat(r)}},{key:"getArticleLrc",value:function(){var t=Object(v["a"])(regeneratorRuntime.mark((function t(e,n){var r,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=this._getArticleBasePath(e,n),t.next=3,S.a.get("".concat(r,".lrc"));case 3:return i=t.sent,t.abrupt("return",i.data);case 5:case"end":return t.stop()}}),t,this)})));function e(e,n){return t.apply(this,arguments)}return e}()},{key:"getMediaPath",value:function(t,e){var n=this._getArticleBasePath(t,e);return"".concat(n,".mp3")}}]),t}(),I=new _;r["a"].use(m["a"]).use(b["a"]).use(k["a"]).use(y["a"]);var C={data:function(){return{book:null,showTranslation:!1}},created:function(){var t=this;return Object(v["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n={title:"新概念英音第三册",sn:"037F"},e.next=3,I.getBook(n);case 3:t.book=e.sent;case 4:case"end":return e.stop()}}),e)})))()}},j=C,A=(n("0890"),Object(c["a"])(j,f,p,!1,null,"3cc15574",null)),T=A.exports,E=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"repeater"},[n("van-nav-bar",{attrs:{title:t.article.titleTranslation,"left-text":"返回","left-arrow":""},on:{"click-left":function(e){return t.$router.go(-1)}}}),n("van-tabs",{staticClass:"main",attrs:{animated:""},nativeOn:{click:function(e){t.word=""}},model:{value:t.tabIndex,callback:function(e){t.tabIndex=e},expression:"tabIndex"}},[n("van-tab",{staticClass:"tab-article",attrs:{title:"全文"}},[n("KuiArticle",{attrs:{value:t.article,marks:t.words},on:{"word-click":t.onWordClick}})],1),n("van-tab",{staticClass:"tab-sentence",attrs:{title:"句子"}},[t.currentSection&&t.currentSection.text?n("div",{staticClass:"content"},[n("KuiSentence",{attrs:{value:t.currentSection.text},on:{"word-click":t.onWordClick}}),n("van-overlay",{attrs:{"class-name":"overlay",show:t.showSentence},on:{click:function(e){t.showSentence=!1}}}),n("van-icon",{staticClass:"showSentence",attrs:{name:"eye",size:"26",color:t.showSentence?"white":"unset"},on:{click:function(e){t.showSentence=!t.showSentence}}})],1):n("van-skeleton",{attrs:{row:3}})],1),n("van-tab",{staticClass:"tab-vocabulary",attrs:{title:"生词"}},[n("KuiVocabulary",{attrs:{bookId:t.bookId,articleId:t.articleId}})],1)],1),n("KuiPlayer",{ref:"domPlayer"}),n("KuiDict",{staticClass:"dict",attrs:{word:t.word,bookId:t.bookId,articleId:t.articleId,border:!1}}),t.currentSection?n("div",{directives:[{name:"show",rawName:"v-show",value:2!==t.tabIndex,expression:"tabIndex !== 2"}],staticClass:"current-translation",on:{click:function(e){t.showTranslation=!t.showTranslation}}},[t._v(" "+t._s(t.showTranslation?t.currentSection.translation:"点击显示翻译")+" ")]):t._e(),n("div",{staticClass:"button-bar"},[n("van-icon",{staticClass:"item",attrs:{name:"replay"},on:{click:function(e){return t.player.seekStart()}}}),n("van-icon",{staticClass:"item",attrs:{name:"arrow-left"},on:{click:function(e){return t.$store.commit("sections/last")}}}),n("van-icon",{staticClass:"item",attrs:{name:t.playState},on:{click:function(e){return t.player.toggle()}}}),n("van-icon",{staticClass:"item",attrs:{name:"arrow"},on:{click:function(e){return t.$store.commit("sections/next")}}}),n("van-icon",{staticClass:"item",attrs:{name:t.playMode},on:{click:function(e){t.player.mode=t.player.mode?0:1}}})],1)],1)},L=[],$=(n("d81d"),n("da3c"),n("0b33")),P=(n("bda7"),n("5e46")),R=(n("f1dc"),n("6e47")),N=n("2f62"),B=(n("ac1f"),n("1276"),n("4d63"),n("25f0"),n("466d"),n("5319"),n("498a"),function(){Date.now=Date.now||(new Date).getTime;var t=/\[(\d{2,}):(\d{2})(?:\.(\d{2,3}))?\]/g,e={title:"ti",artist:"ar",album:"al",offset:"offset",by:"by",tt:"tt",order:"or"},n=function n(r,i){r=n.trim(r),this.lrc=r,this.handler=i||function(){},this.tags={},this.lines=[],this.txts=[],this.isLrc=n.isLrc(r),this.curLine=0,this.state=0,this.msFn=function(t){return t.length<=2?10:1};var o,a,s,c,u=r.split(/\n/);for(var l in e)o=r.match(new RegExp("\\["+e[l]+":([^\\]]*)\\]","i")),this.tags[l]=o&&o[1]||"";t.lastIndex=0;for(var d=0,h=u.length;d<h;d++)while(s=t.exec(u[d]))c=t.lastIndex,a=n.trim(u[d].replace(t,"")),t.lastIndex=c,this.lines.push({time:60*s[1]*1e3+1e3*s[2]+(s[3]||0)*this.msFn(s[3]),originLineNum:d,txt:a}),this.txts.push(a);this.lines.sort((function(t,e){return t.time-e.time}))};function r(t){for(var e=0,n=this.lines.length;e<n;e++)if(t<=this.lines[e].time)break;return e}function i(t){this.handler.call(this,this.lines[t].txt,{originLineNum:this.lines[t].originLineNum,lineNum:t})}return n.prototype={play:function(t,e){var n=this;t=t||0,n._startStamp=Date.now()-t,n.state=1,n.isLrc&&(n.curLine=r.call(n,t),e||n.curLine&&i.call(n,n.curLine-1),n.curLine<n.lines.length&&(clearTimeout(n._timer),n._timer=setTimeout((function t(){i.call(n,n.curLine++),n.lines[n.curLine]&&(n._timer=setTimeout((function(){t()}),n.lines[n.curLine].time-(Date.now()-n._startStamp)))}),n.lines[n.curLine].time-t)))},pauseToggle:function(){var t=Date.now();this.state?(this.stop(),this._pauseStamp=t):(this.play((this._pauseStamp||t)-(this._startStamp||t),!0),delete this._pauseStamp)},seek:function(t){this._startStamp-=t,this.state&&this.play(Date.now()-this._startStamp)},stop:function(){this.state=0,clearTimeout(this._timer)}},n.trim=function(t){return t.replace(/(^\s*|\s*$)/m,"")},n.isLrc=function(e){return t.test(e)},n}()),D=B,M=function(){function t(e){Object(w["a"])(this,t);var n=new D(e);this.artist=n.tags.artist,this.album=n.tags.album,this.title=n.tags.title,this.titleTranslation=n.tags.tt,this.order=n.tags.order,this.duration=n.lines[n.lines.length-1].time,this.sections=this.content(n.lines)}return Object(x["a"])(t,[{key:"content",value:function(t){var e=[];0!=t[0].time&&e.push({text:null,translation:null,time:0});for(var n=0;n<t.length;n++){var r={};void 0==t[n+1]?2==t[n].txt.split("^").length?(r.text=t[n].txt.split("^")[0],r.translation=t[n].txt.split("^")[1]):(r.text=t[n].txt.split("^")[0],r.translation=" "):t[n+1].originLineNum-t[n].originLineNum>1?2==t[n].txt.split("^").length?(r.text=t[n].txt.split("^")[0]+"\n",r.translation=t[n].txt.split("^")[1]+"\n"):(r.text=t[n].txt.split("^")[0]+"\n",r.translation=" \n"):2==t[n].txt.split("^").length?(r.text=t[n].txt.split("^")[0],r.translation=t[n].txt.split("^")[1]):(r.text=t[n].txt.split("^")[0],r.translation=" "),r.time=t[n].time,e.push(r)}return e}}]),t}(),K=M,W=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",{staticClass:"sentence",domProps:{innerHTML:t._s(t.html)},on:{click:t.onClick}})},V=[],q=(n("c975"),/(\b\w+\b)/g),F={divide:function(t){return t.match(q)},replace:function(t,e){return t.replace(/(\b\w+\b)/g,e)}},J={props:{value:String,marks:{type:Array,default:function(){return[]}}},computed:{html:function(){var t=this;if(!this.value)return"";var e=F.replace(this.value,(function(e){var n=t.marks&&-1!==t.marks.indexOf(e);return'<word class="'.concat(n?" mark":"",'">').concat(e,"</word>")}));return e}},methods:{onClick:function(t){var e=t.target;if("word"===e.tagName.toLowerCase()){var n=e.innerText;this.$emit("word-click",{text:n,dom:e}),t.stopPropagation()}}}},H=J,z=Object(c["a"])(H,W,V,!1,null,null,null),U=z.exports,G=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"article",on:{scroll:t.onScroll}},[n("h1",[t._v(t._s(t.value.title))]),t.showRawText?n("div",{staticClass:"raw-text"},t._l(t.paragraphs,(function(e,r){return n("p",{key:r},t._l(e,(function(e,r){return n("KuiSentence",{directives:[{name:"longpress",rawName:"v-longpress",value:function(){t.onSentenceClick(e.index)},expression:"\n          () => {\n            onSentenceClick(item.index)\n          }\n        "}],key:r,class:{current:e.index===t.current},attrs:{value:e.text,marks:t.marks},on:{"word-click":t.onWordClick},nativeOn:{dblclick:function(n){return t.onSentenceClick(e.index)}}})})),1)})),0):t._e(),t.showTranslation?n("div",{staticClass:"translation"},t._l(t.paragraphs,(function(e,r){return n("p",{key:r},t._l(e,(function(e,r){return n("span",{key:r,class:{current:e.index===t.current},on:{click:function(n){return t.onSentenceClick(e.index)}}},[t._v(t._s(e.translation))])})),0)})),0):t._e(),n("van-icon",{directives:[{name:"show",rawName:"v-show",value:t.currentOutOfViewport,expression:"currentOutOfViewport"}],staticClass:"anchor",attrs:{name:"location",size:"26"},on:{click:t.anchorCurrentSentence}})],1)},Q=[],X=(n("13d5"),n("8a79"),{name:"kui-article",props:{value:Object,marks:Array,showRawText:{type:Boolean,default:!0},showTranslation:{type:Boolean,default:!0}},data:function(){return{currentOutOfViewport:!1}},computed:Object(g["a"])({paragraphs:function(){return this.value&&this.value.sections?this.value.sections.reduce((function(t,e,n){var r=t[t.length-1];return e.index=n,r.push(e),e.text&&e.text.endsWith("\n")&&t.push([]),t}),[[]]):null}},Object(N["b"])("sections",["current"])),watch:{current:function(){this.onScroll()}},components:{KuiSentence:U},methods:{onSentenceClick:function(t){this.$store.commit("sections/current",t)},onWordClick:function(t){var e=t.text,n=t.dom;this.$emit("word-click",{text:e,dom:n})},anchorCurrentSentence:function(){this.$el.querySelector(".current").scrollIntoView({behavior:"smooth",block:"start"})},onScroll:function(){var t=this.$el.querySelector(".current");t&&(this.currentOutOfViewport=!this.isElementInViewport(t))},isElementInViewport:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=t.getBoundingClientRect(),r=n.top>=0,i=n.left>=0,o=n.bottom<=(window.innerHeight||document.documentElement.clientHeight)+e,a=n.right<=(window.innerWidth||document.documentElement.clientWidth)+e;return r&&i&&o&&a}}}),Y=X,Z=(n("3f82"),Object(c["a"])(Y,G,Q,!1,null,null,null)),tt=Z.exports,et=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div")},nt=[],rt=n("ade3"),it=n("1e5c"),ot=function(){function t(){Object(w["a"])(this,t),this.domAudio=null,this.mode=t.MODE_NORMAL,this.sectionStart=0,this.sectionEnd=0,this.repeatTimes=0,this.onTimeUpdated=null,this.onSectionOnce=null}return Object(x["a"])(t,[{key:"open",value:function(t){this.domAudio=new it["Howl"]({src:t}),this.sectionStart=0,this.sectionEnd=this.duration()}},{key:"play",value:function(){var t=this;this.isPlaying()||(this.domAudio.play(),this._playInterval=setInterval((function(){t._positionChanged()}),300))}},{key:"pause",value:function(){this.domAudio.pause(),clearInterval(this._playInterval)}},{key:"stop",value:function(){this.domAudio.stop(),clearInterval(this._playInterval)}},{key:"isPlaying",value:function(){return!!this.domAudio&&this.domAudio.playing()}},{key:"toggle",value:function(){this.isPlaying()?this.pause():this.play()}},{key:"position",value:function(){return this.domAudio?parseInt(1e3*this.domAudio.seek()):0}},{key:"seek",value:function(t){this.domAudio&&this.domAudio.seek(t/1e3)}},{key:"seekStart",value:function(){this.seek(this.sectionStart)}},{key:"_positionChanged",value:function(){this._isOutOfSection()&&(this._sectionOnce(),this.mode===t.MODE_REPEAT&&this.seekStart()),this.onPositionChanged&&this.onPositionChanged(this.position())}},{key:"_sectionOnce",value:function(){this.repeatTimes++,this.onSectionOnce&&this.onSectionOnce()}},{key:"section",value:function(t,e){if(e<t)throw"复读区间设置异常 end < start";this.sectionStart=t,this.sectionEnd=e,this.repeatTimes=0}},{key:"_isOutOfSection",value:function(){var t=this.position();return t>this.sectionEnd||t<this.sectionStart}},{key:"muted",value:function(t){if(0===arguments.length)return this.domAudio.muted;this.domAudio.muted=t}},{key:"volume",value:function(t){if(0===arguments.length)return this.domAudio.volume;this.domAudio.volume=t}},{key:"duration",value:function(){return this.domAudio.duration()}}]),t}();Object(rt["a"])(ot,"MODE_NORMAL",0),Object(rt["a"])(ot,"MODE_REPEAT",1);var at=ot,st={data:function(){return{player:new at,sections:[]}},computed:Object(N["b"])("sections",["current"]),watch:{current:function(t){this.section(t)}},created:function(){var t=this;this.player.onSectionOnce=function(){t.player.mode===at.MODE_NORMAL&&t.$store.commit("sections/next")}},methods:{section:function(t){var e=this.sections[t],n=this.sections[t+1];this.player.section(e,n),this.player.seekStart()},open:function(t,e){this.player.open(t),this.sections=e}}},ct=st,ut=Object(c["a"])(ct,et,nt,!1,null,null,null),lt=ut.exports,dt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"vocabulary"},t._l(t.article,(function(e,r){return n("KuiDict",{key:r,attrs:{word:e,bookId:t.bookId,articleId:t.articleId}})})),1)},ht=[],ft=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.result?n("van-cell",{staticClass:"dict",attrs:{"label-class":"label "+(t.collapse&&"label-collapse"),label:t.explain,border:t.border,center:""},on:{click:function(e){t.collapse=!t.collapse}}},[n("div",{attrs:{slot:"title"},slot:"title"},[n("span",{staticClass:"word"},[t._v(t._s(t.result.query))]),t.result.phonetic?n("span",{staticClass:"phonetic"},[t._v(" ["+t._s(t.result.phonetic)+"]")]):t._e()]),n("van-icon",{attrs:{slot:"right-icon",name:t.star?"star":"star-o"},on:{click:function(e){return e.stopPropagation(),t.onStar(e)}},slot:"right-icon"})],1):t._e()},pt=[],vt=(n("a15b"),n("c3a6"),n("ad06")),mt="https://bird.ioliu.cn/v2?url=http://fanyi.youdao.com/openapi.do?keyfrom=repeator&key=436780866&type=data&doctype=json&only=dict&version=1.1&q=",bt=function(){function t(){Object(w["a"])(this,t)}return Object(x["a"])(t,[{key:"lookupByWeb",value:function(){var t=Object(v["a"])(regeneratorRuntime.mark((function t(e){var n,r,i,o,a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,S.a.get(mt+e);case 2:return n=t.sent,r=n.data,i=this.loadCache(),o=r.query,a=r.basic,s=Object(g["a"])({query:o},a),i[e]=s,localStorage.setItem("dictCache",JSON.stringify(i)),t.abrupt("return",s);case 10:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"lookupByCache",value:function(t){var e=this.loadCache();return e[t]}},{key:"lookup",value:function(){var t=Object(v["a"])(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e&&""!==e){t.next=2;break}return t.abrupt("return",null);case 2:if(n=this.lookupByCache(e),!n){t.next=5;break}return t.abrupt("return",n);case 5:return t.next=7,this.lookupByWeb(e);case 7:return t.abrupt("return",t.sent);case 8:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"loadCache",value:function(){var t=localStorage.getItem("dictCache");return t?JSON.parse(t):{}}}]),t}(),kt=new bt;r["a"].use(m["a"]).use(vt["a"]);var yt={props:{word:String,bookId:String,articleId:String,border:{type:Boolean,default:!0}},data:function(){return{result:null,collapse:!0}},computed:{star:function(){return this.$store.getters["vocabulary/have"](this.word,this.bookId,this.articleId)},explain:function(){if(!this.result||!this.result.explains)return null;var t=this.result.explains;return t.join("\n")}},methods:{lookup:function(){var t=this;return Object(v["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,kt.lookup(t.word);case 2:t.result=e.sent;case 3:case"end":return e.stop()}}),e)})))()},onStar:function(){var t=this.word,e=this.bookId,n=this.articleId;this.star?this.$store.commit("vocabulary/remove",{word:t,bookId:e,articleId:n}):this.$store.commit("vocabulary/add",{word:t,bookId:e,articleId:n})}},created:function(){this.lookup()},watch:{word:function(){this.lookup()}}},gt=yt,wt=(n("c544"),Object(c["a"])(gt,ft,pt,!1,null,"1963d6c0",null)),xt=wt.exports,Ot={components:{KuiDict:xt},props:{bookId:String,articleId:String},data:function(){return{}},computed:{article:function(){var t=this.bookId,e=this.articleId,n=this.$store.getters["vocabulary/article"](t,e);return n.map((function(t){return t.word}))}},created:function(){}},St=Ot,_t=Object(c["a"])(St,dt,ht,!1,null,null,null),It=_t.exports;r["a"].use($["a"]).use(P["a"]).use(y["a"]).use(k["a"]).use(R["a"]);var Ct={components:{KuiSentence:U,KuiArticle:tt,KuiPlayer:lt,KuiVocabulary:It,KuiDict:xt},data:function(){return{bookId:"",articleId:"",article:{},player:null,word:"",tabIndex:0,showSentence:!1,showTranslation:!0}},computed:Object(g["a"])({words:function(){var t=this.bookId,e=this.articleId,n=this.$store.getters["vocabulary/article"](t,e);return n?n.map((function(t){return t.word})):[]},playState:function(){return this.player&&this.player.isPlaying()?"pause-circle":"play-circle"},playMode:function(){return this.player&&this.player.mode?"exchange":"play-circle-o"},currentSection:function(){return this.article&&this.article.sections&&-1!==this.current?this.article.sections[this.current]:null}},Object(N["b"])("sections",["current"])),created:function(){var t=this;return Object(v["a"])(regeneratorRuntime.mark((function e(){var n,r,i,o,a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.$route.params,r=n.book,i=n.article,e.next=3,I.getArticleLrc(r,i);case 3:o=e.sent,a=I.getMediaPath(r,i),t.article=new K(o),t.bookId=I.getBookId(r),t.articleId=I.getArticleId(t.article),t.$store.commit("sections/init",t.article.sections.length),s=t.article.sections.map((function(t){return t.time})),t.$refs.domPlayer.open(a,s),t.player.play();case 12:case"end":return e.stop()}}),e)})))()},mounted:function(){this.player=this.$refs.domPlayer.player},beforeDestroy:function(){this.player.stop()},methods:{onWordClick:function(t){var e=t.text,n=t.dom;this.word=e,this._dom&&this._dom.classList.remove("select-word"),n.classList.add("select-word"),this._dom=n}}},jt=Ct,At=(n("b1a3"),n("4bba"),Object(c["a"])(jt,E,L,!1,null,"61dba294",null)),Tt=At.exports;r["a"].use(h["a"]);var Et=[{path:"/",redirect:{name:"book"}},{path:"/repeater",name:"repeater",component:Tt},{path:"/book",name:"book",component:T}],Lt=new h["a"]({routes:Et}),$t=Lt,Pt={namespaced:!0,state:{current:-1,count:-1},mutations:{init:function(t,e){t.count=e,t.current=0},current:function(t,e){t.current=e},next:function(t){var e=t.current+1;e>t.count&&(e=0),this.commit("sections/current",e)},last:function(t){var e=t.current-1;e<0&&(e=0),this.commit("sections/current",e)}},actions:{}};n("c740"),n("45fc"),n("a434");function Rt(){return JSON.parse(localStorage.getItem("vocabulary"))}function Nt(t){localStorage.setItem("vocabulary",JSON.stringify(t))}var Bt={namespaced:!0,state:{vocabulary:null},getters:{book:function(t){return function(e){return""===e?null:t.vocabulary[e]=t.vocabulary[e]||{}}},article:function(t,e){return function(t,n){var r=e.book(t);return r?r[n]=r[n]||[]:null}},have:function(t,e){return function(t,n,r){var i=e.article(n,r);return!!i&&i.some((function(e){return e.word===t}))}}},mutations:{load:function(t){t.vocabulary=Rt()||{}},add:function(t,e){var n=e.word,r=e.bookId,i=e.articleId,o=this.getters["vocabulary/have"],a=this.getters["vocabulary/article"];if(""!==n&&""!==r&&""!==i&&!o(n,r,i)){var s=a(r,i);s.push({word:n,date:Date.now()}),Nt(t.vocabulary)}},remove:function(t,e){var n=e.word,r=e.bookId,i=e.articleId,o=this.getters["vocabulary/article"],a=o(r,i),s=a.findIndex((function(t){return t.word===n}));-1!==s&&(a.splice(s,1),Nt(t.vocabulary))}},actions:{}};r["a"].use(N["a"]);var Dt=new N["a"].Store({modules:{sections:Pt,vocabulary:Bt}}),Mt=(n("b0c0"),{install:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{time:1e3};t.directive("longpress",{bind:function(t,n,r){if("function"!==typeof n.value){var i=r.context.name,o="[longpress:] provided expression '".concat(n.expression,"' is not a function, but has to be ");i&&(o+="Found in component '".concat(i,"' ")),console.warn(o)}var a=null,s=function(t){"click"===t.type&&0!==t.button||null===a&&(a=setTimeout((function(){u()}),e.time))},c=function(){null!==a&&(clearTimeout(a),a=null)},u=function(t){n.value(t)};t.addEventListener("mousedown",s),t.addEventListener("touchstart",s),t.addEventListener("click",c),t.addEventListener("mouseout",c),t.addEventListener("touchend",c),t.addEventListener("touchcancel",c)}})}});r["a"].config.productionTip=!1,r["a"].use(Mt),new r["a"]({router:$t,store:Dt,render:function(t){return t(l)}}).$mount("#app")},"5d63":function(t,e,n){},"7c55":function(t,e,n){"use strict";var r=n("2395"),i=n.n(r);i.a},b1a3:function(t,e,n){"use strict";var r=n("21d5"),i=n.n(r);i.a},c544:function(t,e,n){"use strict";var r=n("35bb"),i=n.n(r);i.a},c58c:function(t,e,n){},fdb1:function(t,e,n){}});
//# sourceMappingURL=app.c27587f9.js.map